<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title> Demo 4 </title>
<script src="../src/chunky.js"></script>
<style>
	.autodoc {}
	.autodoc .autodoc_docs {}
	.autodoc .autodoc_HTML {
		padding: 1em 25px;
		margin: 15px 0;
		border: 1px solid black;
	}
	.autodoc .autodoc_example {}
</style>
</head>

<body>
	<div id="root">
		<!-- Render All Content Here. -->
	</div>
	
	<script>
		(function() {

			/*
			Demo 4. 
			* Create a template chunk with data variables properly documented.
			* Use the .data(name) method to get the data object. Then use .doc.info(key, value) to set it's documentation object.
			*/

			// Create A Template Chunk.
			var template = new Chunk('template');
			template.doc.info('desc', 'A section header to clearly communicate the following information intended purpose.');
			template.instruct(function(chunk) {

				// Create header element.
				var header = document.createElement('h1');
				header.classList.add('template_header');
				header.innerHTML = chunk.data('title').getValue(); //Create data variable where data may be inserted into for the title.
				chunk.data('title').doc.info('desc', 'Large text to indicating what the following information is about.'); // Documentation for title.

				// Create subheader element.
				var subheader = document.createElement('span');
				subheader.classList.add('template_subheader');
				subheader.innerHTML = chunk.data('subtitle').getValue(); //Create data variable where data may be inserted into for the subtitle.
				chunk.data('subtitle').doc.info('desc', 'Smaller text to appear below the title.'); // Documentation for subtitle')

				// Create an element to contain everything for the build.
				var element = document.createElement('div');
				element.classList.add('template');
				element.appendChild(header);
				element.appendChild(subheader);

				// Return build.
				return element;
			})
			template.data('title', 'Title.');
			template.data('subtitle', 'Subtitle');


			/*
			Demo 4. 
			* Create a chunk to render the information.
			* Use the .data(name) method to get the data object. Then use .doc.info(key) to get the doc object property value.
			*/

			// Display docs.
			var autoDoc = new Chunk('autodoc');
			autoDoc.data('demo', template);
			autoDoc.instruct(function(chunk) {

				// Create info.
				function newInfo(name, desc) {
					var inf = document.createElement('div');
					inf.innerHTML = name + ': ' + desc;
					return inf; 
				}
				
				// Print chunks for demos.
				var example = '';
				var HTML = '';
				var docs = '';
				if ( chunk.data('demo').getValue() ) {
					
					var demo = chunk.data('demo').getValue();
					example = demo.ready();
					HTML = example.outerHTML;
					docs = (function() {
						var content = '';
						var variables = demo.detectData('variable');
						for (var v in variables) {
							var variable = variables[v];
							var desc = variable.doc.info('desc');
							content += '<div>' + variable.name + ': ' + desc + '</div>';
						}
						return content;
					})();
				}

				// Display documentation.
				var el_docs = document.createElement('div');
				el_docs.innerHTML = docs;
				el_docs.classList.add('autodoc_docs');
				
				// Display HTML.
				var el_HTML = document.createElement('div');
				el_HTML.innerHTML = String(HTML).replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;');
				el_HTML.classList.add('autodoc_HTML');
				
				// Display Example.
				var el_example = document.createElement('div');
				el_example.appendChild(example);
				el_example.classList.add('autodoc_example');
				
				// Create an element to contain everything for the build.
				var element = document.createElement('div');
				element.classList.add('autodoc');
				element.appendChild(el_docs);
				element.appendChild(el_HTML);
				element.appendChild(el_example);
				return element;
			})

			// Add Content To Root.
			var root = document.getElementById('root');
			root.appendChild(autoDoc.ready());
		}());
	</script>
</body>

</html>